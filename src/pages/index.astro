---
import { getUser } from "db/supabase/auth"
import Landing from "components/landing/Landing"
import Layout from "layouts/Layout.astro"

const user = await getUser(Astro.request)

if (!user) {
  return Astro.redirect("/auth")
}
---

<Layout user={user}>
  <Landing userId={user.id} client:idle />
</Layout>
