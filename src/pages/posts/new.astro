---
import Layout from "../../layouts/Layout.astro"
import NewPost from "../../components/NewPost"
import { getUser } from "../../db/supabase/supabase"

const user = await getUser(Astro.request)

console.log(user)

if (!user) {
  return Astro.redirect("/auth")
}
---

<Layout>
  <NewPost userId={user.id}  client:load />
</Layout>
